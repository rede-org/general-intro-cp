# 4.4  Expanding Purpose

## Overview

Behaviors are intended to define various aspects of an application's literal behavior under various contextual circumstances. These circumstances and the functionality of the behavior through its operations define its purpose. Previously, the circumstances were only defined by the contexts themselves and any qualifications that the behavior may have for them, but there are settings for a behavior's contexts that can expand the purpose further.

These settings, described below, can be used individually or in combination to affect a change in how a behavior obtains or manages its contexts. The logging feature that has been worked on throughout this chapter can be expanded upon to better discuss what these settings can do. These changes not only work to better showcase the settings, but they also help realize one of the original intentions of logging, which was that logs could be routed to different outputs, not only the console as has been done so far.

First, there needs to be a context to differentiate console routing from the overall log settings:

```
Console Log Route : context Log Settings.
```

The `Log Settings` used so far is fine to define the underlying minimum log level, so the new context `Console Log Route` can simply be a descendant of that. The `Perform Logging` behavior should be updated for that as well:

```
Perform Console Logging ::
    logging per Console Log Route for {*Log Message*}: {route, messages}
        where messages is messages filtered by 
            [(message) => message(Level) >= route(Minimum Level)]?
    {
        Log Messages :: for {messages} 
            whenever |messages| > 0, 
            foreach message in messages?
                evaluate "Log: \(message)" as Console Message,
                \deactivate message;
    }.
```

There's not a lot of changes here, just swapping `Log Settings` for `Console Log Route`, renaming the behavior to `Perform Console Logging`, and renaming the behavior's context `settings` to `route`. However, this decouples the behavior of console logging from the general `Log Settings`.

Context descendants do not inherit the behaviors of their ancestors, so the `Maintain Log Settings`, [from earlier](4.2-from-when-to-whenever.md#reactive-behavior), will need to be updated similarly:

```
Maintain Console Log Route::
    maintain the existence of Console Log Route in accordance with App State: 
        {route, app}?
    {
        Stop Logging :: for {route, app} whenever app is shutting down?
            activate Log Message ["Stopping Logs", Level [Log Level (Debug)] ],
            deactivate settings;
    }.
```

These changes set the stage to move away from logging being console specific.



## Exclusivity

The first step to enable multiple log routes pertains to the concept of the contexts' exclusivity, which defines how contexts might be shared between behaviors.&#x20;



\[Exclusivity applied to share `{*Log Messages*}` between router behaviors.]

\[so if there was a `File Log Route` for outputting to a file, that could now have its own `Perform File Logging` behavior that would perform its specific logic within a `Log Messages` operation.]

By default, the contexts of a behavior are unique to a single instance of a behavior.&#x20;

\[Consider the `Perform Logging` behavior that has been worked on throughout this chapter. It depends on a `Log Settings` context. If there were two `Log Settings` contexts, there would (per the latest implementation) be two `Perform Logging` behavior instances, one for each `Log Settings` context. The `Log Message` contexts would also only end up qualifying for only one of those two behavior instances at a time. Given that the behavior uses a bucket, any `Log Message` contexts that qualify for both behaviors would be split between the two behavior instances.]



## Fulfillment

\[Fulfillment applied to the relationship between Log Settings and App State.]



## Specifiers

\[Specifiers applied to destroying the routers when the Log Settings is destroyed, and Log Settings when App State's behavior is destroyed.]
